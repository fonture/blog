---
title: 关于作用域和作用域链
date: 2017-01-18 16:38:10
tags: [js,作用域链]
categories: 技术
---
&emsp;&emsp;本来是计划写一下JS闭包的概念的。但发现要准确理解闭包的之前，必须要先弄明白几个重要的概念：
## 一、执行环境
***
&emsp;&emsp;执行环境定义了变量或函数有权访问的其他数据，决定了它们各自的行为。每一个执行环境都有一个与之关联的变量对象，用于保存执行环境中定义的变量和函数。要注意的是，<font color=red>执行环境和变量对象都是在执行函数的时候创建，而并非是在定义函数的时候创建的</font>。
&emsp;&emsp;当执行流进入到函数时，该函数的执行环境将被推入到一个环境栈中，等到函数执行完毕，其环境将被弹出并销毁，保存在其中的变量和函数也随之销毁，并把控制权交给之前的执行环境。<font color=red>这个环境栈其实就是作用域链</font>。
## 二、作用域
***
### 1、全局作用域
&emsp;&emsp;•&ensp;所有在全局环境中定义的变量都拥有全局作用域。
&emsp;&emsp;•&ensp;所有未经声明的变量都是全局变量，拥有全局作用域。
### 2、局部作用域
&emsp;&emsp;除了以上两种情况，其余的变量都是局部变量，局部变量一般位于函数或对象内部。
&emsp;&emsp;注意：尽量不要定义全局变量，因为全局变量可以被所有的函数和对象访问到，很可能引起属性冲突和全局环境污染。尤其是在团队项目当中，如果应用不恰当，很可能造成某个全局属性的值不知道是怎么来的。
## 三、作用域链
***
&emsp;&emsp;作用域链保证对执行环境有权访问的所有变量和函数的有序访问。之前也提到过，执行环境组成的环境栈形成一个链式调用，最顶上的环境永远是当前执行流执行到的函数的执行环境。这也就是为什么说作用域链的最前端总是当前执行环境的变量对象。
